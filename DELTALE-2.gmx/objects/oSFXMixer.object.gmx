<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>-727379969</depth>
  <persistent>-1</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>debug       = false;

PINK        = make_color_rgb(255,49,105);
BLACK       = make_color_rgb(17,19,25);

scrollY     = 0;
sound       = 0;
sfxCount    = 0;

select[0]   = 0;
selectCount = 0;

mouseX      = 0;
mouseY      = 0;
saveHover   = 0;
openHover   = 0;

xx          = 32;
yy          = 32;

ssV         = 0;
soundCurrent= 0;

WIDTH       = 320;
HEIGHT      = 308;

surfSFX     = 0;
surfSFX     = surface_create(WIDTH+1,HEIGHT+1);
update      = true;

// drag
dragIX      = 0;
dragIY      = 0;
dragging    = false;

//OPEN AND COLLECT SFX DATA
ini_open("sfx.ini");
    for (i=0;i&lt;100;i++) // &lt; APPROXIMATELY THE NUMBER OF SOUNDS IN YOUR GAME
        {
        if audio_get_name(i) != "&lt;undefined&gt;"
            {
            var c       = sfxCount; sfxCount++;
            sfxIndex[c] = audio_get_name(i);
            sfxVol[c]   = ini_read_real("SFX",sfxIndex[c],.3);
            audio_sound_gain(c,sfxVol[c],0);
            }
        }
ini_close();

//APPLY GAIN
// This is just a general script which is already performed in the previous step.
// Create your own setup to specify things like custom audio groups.
    //for (i=0;i&lt;sfxCount;i++)    {audio_sound_gain(i,sfxVol[i],0);}

</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="2" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Stop Sound Playing
audio_stop_sound(soundCurrent);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>/// Perform all the logic for the SFX Mixer Window
//STEP //////////////////////////////////////////////////////////////////////////////////////////
if keyboard_check_pressed(ord("M")) {debug = !debug; update = true;}

if (debug)
    {
    // MOUSE
    mouseX = (device_mouse_raw_x(0));
    mouseY = (device_mouse_raw_y(0));
     
    if saveHover || openHover {update = true;}
    saveHover = false;
    openHover = false;
    
// TITLE BAR ////////////////////////////////////////////////////////////////////////
if ((mouseY &gt; yy &amp;&amp; mouseY &lt; yy+HEIGHT) &amp;&amp; (mouseX &gt; xx &amp;&amp; mouseX &lt; xx+WIDTH))
    {
    if mouseY &lt; yy+16
        {
        //SAVE
        if mouseX &gt; xx+WIDTH-16
            {
            saveHover = true;
            if mouse_check_button_pressed(mb_left) 
                {
                var fileOpen = get_open_filename("INI File|*.ini","");
                
                    if fileOpen != ""
                    {
                        ini_open(fileOpen);
                        for(i=0;i&lt;sfxCount;i++)
                            {sfxVol[i]= ini_read_real("SFX",sfxIndex[i],.3);}
                        ini_close();                        
                        display = "File Opened.";
                    }
                }
            update = true;
            }
        // HOVER -----------------------------------------------------------
        else if mouseX &gt; xx+WIDTH-32
            {
            openHover = true;
            if mouse_check_button_pressed(mb_left) 
                {
                var fileSave = get_save_filename("INI File|*.ini","");  
                              
                    if fileSave != ""
                    {
                        ini_open(fileSave);
                        for(i=0;i&lt;sfxCount;i++)
                            {ini_write_real("SFX",sfxIndex[i],sfxVol[i]);}
                        ini_close();                        
                        display = "File Saved.";
                    }
                
                }
            update = true;
            }
        // BAR - DRAGGING -----------------------------------------------------------
        else
            {
            if mouse_check_button_pressed(mb_left) 
                {dragIX = xx-mouseX; dragIY = yy-mouseY; dragging = true;}
            }
        }
// SOUND EDITING ////////////////////////////////////////////////////////////////////////
    else if (!dragging)
        {       
        if mouse_check_button_pressed(mb_left)
            { 
            // SHIFT SELECT -----------------------------------------------------------
            if keyboard_check(vk_shift)
                {
                if selectCount
                    {
                    var initS = select[selectCount-1];
                    var destS = clamp(floor((-16+(mouseY-yy)+(scrollY*16))/16),0,sfxCount);
                    var dist = destS-initS;
                    var ii = 0;
                    
                    repeat(abs(dist))
                        {
                        ii += sign(dist);
                        select[selectCount] = initS + ii;
                        selectCount++;
                        }
                    }
                }         
            // CONTROL SELECT -----------------------------------------------------------
            else if keyboard_check(vk_control)
                {
                select[selectCount] = clamp(floor((-16+(mouseY-yy)+(scrollY*16))/16),0,sfxCount);
                selectCount++;
                }
            else
                {
                if mouseX &lt; xx+146
                    {
                    for(i=0;i&lt;selectCount;i++) {select[i] = -1;}
                    selectCount = 0;
                    select[selectCount] = clamp(floor((-16+(mouseY-yy)+(scrollY*16))/16),0,sfxCount);
                    selectCount++;
                    }
                }
            }
        if mouse_check_button(mb_left)
            {
            if (mouseX &gt; xx+146) &amp;&amp; (mouseX &lt; xx+WIDTH)
                {
                ssV = round( ( (mouseX-xx-148) /140)*20) /20;
                for(i=0;i&lt;selectCount;i++)
                    {
                    sfxVol[select[i]] = clamp(ssV,0,1);
                    }
               
                update = true;
                }
            }            
        if mouse_check_button_released(mb_left)
            {                
            for(i=0;i&lt;selectCount;i++)
                {
                if select[i] &gt;= 0 &amp;&amp; audio_exists(select[i])
                    {
                    audio_sound_gain(select[i],sfxVol[select[i]],0);
                    if soundCurrent {audio_stop_sound(soundCurrent);}
                    soundCurrent = audio_play_sound(select[i],10,0);
                    ini_open("sfx.ini");
                        ini_write_real("SFX",sfxIndex[select[i]],sfxVol[select[i]]);
                    ini_close(); 
                    }
                }
            // Alarm to stop long sounds
            alarm[0] = 120;
            update = true;
            }            
        }
        
    // SCROLLING -----------------------------------------------------------
    if mouse_wheel_up()     {scrollY = max(scrollY-3,0); update = true;}
    if mouse_wheel_down()   {scrollY = min(scrollY+3,sfxCount-(HEIGHT/16)+1); update = true;}
    }
    
// DRAGGING /////////////////////////////////////////////////////////////////////
    if dragging 
        {
        xx = dragIX+mouseX; yy = dragIY+mouseY;
        if !mouse_check_button(mb_left) 
            {
            xx = clamp(xx,0,view_wport-WIDTH);
            yy = clamp(yy,0,view_hport-HEIGHT);
            dragging = false;
            }
        }
        
// SURFACE /////////////////////////////////////////////////////////////////////
    if update
        {
        if !surface_exists(surfSFX) {surfSFX = surface_create(WIDTH+1,HEIGHT+1);}
        else
            {
            surface_set_target(surfSFX);
                draw_clear_alpha(BLACK,1); // ! BLACK
                // DRAW
                draw_set_color(PINK); //!\\ PINK
                draw_rectangle(0,0,WIDTH,HEIGHT,1);
                draw_rectangle(0,0,WIDTH,15,0);
                // BUTTONS
                draw_set_color(c_white);
                draw_sprite(sSFXButtons,0+saveHover,WIDTH-16,0);
                draw_sprite(sSFXButtons,2+openHover,WIDTH-32,0);
                draw_set_font(fontSFX);
                //draw_text(32,4,select);               
                draw_set_halign(fa_right);
                draw_set_valign(fa_center);
                var scrollYMax = min(sfxCount,scrollY+floor(HEIGHT/16));
                // SFX LIST
                for(i=scrollY;i&lt;scrollYMax;i++)
                    {
                    draw_set_color(c_gray);
                    for(t=0;t&lt;selectCount;t++)
                        {
                        if select[t] = i {draw_set_color(c_white); break;}
                        }
                    // Volume Slider
                    for(s=0;s&lt;=20;s++)
                        {
                        var vX = 146+(s*7);
                        var vY = 21+(i-scrollY)*16; //var vA = sfxVol[i]*20 &gt; s;                        
                        
                        if s = 0        {draw_sprite(sSFXSlider,2+(sfxVol[i]*20&gt;s),vX,vY);}
                        else if s &lt; 20  {draw_sprite(sSFXSlider,4+(sfxVol[i]*20&gt;=s),vX,vY);}
                        else            {draw_sprite(sSFXSlider,6+(sfxVol[i]*20=s),vX,vY);}
                        }
                    // Volume Handle
                    var vX = 146+(sfxVol[i]*140);
                    var vY = 21+(i-scrollY)*16;
                    draw_sprite(sSFXSlider,i=select,vX,vY);
                    
                    // Text                    
                    draw_text(142,vY+3,sfxIndex[i]);
                    draw_text(WIDTH-4,vY+4,sfxVol[i]);                    
                    }
                draw_set_halign(fa_left);
                draw_set_valign(fa_top);
                draw_set_color(c_white);
                update = false;
            surface_reset_target();
            }
        }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="64">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>if (debug)
    {
    if (surface_exists(surfSFX)) {draw_surface(surfSFX,xx,yy);}
    draw_text(5,5,"SFX EDITOR DEBUG IS ON");
    draw_text(5,15,string(view_wport)+" "+string(view_hport)+ " / "+string(xx+WIDTH)+" "+string(yy+HEIGHT));
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
